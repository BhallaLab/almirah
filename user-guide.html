<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Tutorial" href="tutorial.html" /><link rel="prev" title="Almirah" href="index.html" />

    <link rel="shortcut icon" href="_static/favicon.png"/><!-- Generated with Sphinx 7.3.7 and Furo 2023.09.10 -->
        <title>User Guide - almirah 0.5.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f0f0f0;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">almirah 0.5.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/logo-full-light.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/logo-full-dark.png" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="writing-configs/index.html">Writing configs</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Writing configs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="writing-configs/specification.html">Specification details</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-configs/rules.html">Organization rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-configs/mapping.html">Database mapping</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="reference/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="reference/dataset.html">Dataset and its Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/database.html">Database and DBManager</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/layout.html">Layout, File, and Tag</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/specification.html">Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/indexer.html">Indexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/convert.html">File format conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/unique.html">Unique Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/utils.html">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="code-of-conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/girishmm/almirah/edit/main/docs/source/user-guide.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="user-guide">
<h1>User Guide<a class="headerlink" href="#user-guide" title="Link to this heading">¶</a></h1>
<section id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Link to this heading">¶</a></h2>
<p>almirah can be installed with <a class="reference external" href="https://pip.pypa.io">pip</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>almirah
</pre></div>
</div>
</section>
<section id="organizing-the-dataset">
<h2>Organizing the dataset<a class="headerlink" href="#organizing-the-dataset" title="Link to this heading">¶</a></h2>
<p>The first step to using any dataset is getting it in shape to allow
manual exploration or automated retrieval of a subset. To get started,
import the almirah module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">almirah</span>
</pre></div>
</div>
<p>almirah relies on two components to organize a dataset:</p>
<ul class="simple">
<li><p>a <a class="reference internal" href="reference/specification.html#almirah.specification.Specification" title="almirah.specification.Specification"><code class="xref py py-class docutils literal notranslate"><span class="pre">Specification</span></code></a> object that takes in the
contents of <a class="reference internal" href="writing-configs/specification.html"><span class="doc">Specification details</span></a> config as an
argument to describe the details of the specification to be abided
by.</p></li>
<li><p>an <a class="reference internal" href="writing-configs/rules.html"><span class="doc">Organization rules</span></a> config that lays down the rules that
will be followed for organization.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spec</span> <span class="o">=</span> <span class="n">Specification</span><span class="o">.</span><span class="n">create_from_file</span><span class="p">(</span><span class="s2">&quot;/path to details&quot;</span><span class="p">)</span>
<span class="n">spec</span><span class="o">.</span><span class="n">organize</span><span class="p">(</span><span class="s2">&quot;/path to rules&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For modalities such as Eye tracking, and Genomics where the
BIDS-specification is still in the proposal stage or is only
present as a descriptor, a custom BIDS-like specification that
mimics the general pattern of the specification is used in the
config.</p>
</div>
</section>
<section id="indexing">
<h2>Indexing<a class="headerlink" href="#indexing" title="Link to this heading">¶</a></h2>
<p>The indexing operation crawls through the organized dataset and stores
files and directories that have a matching path in the specification
in a database. This enables easy querying and filtering.</p>
<p>At an abstract level, each dataset can be thought of as a
<a class="reference internal" href="reference/layout.html#almirah.layout.Layout" title="almirah.layout.Layout"><code class="xref py py-class docutils literal notranslate"><span class="pre">Layout</span></code></a> of files. Each <a class="reference internal" href="reference/layout.html#almirah.layout.File" title="almirah.layout.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> is
associated with a bunch of tags. Each <a class="reference internal" href="reference/layout.html#almirah.layout.Tag" title="almirah.layout.Tag"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tag</span></code></a> is a
<em>name:value</em> pair that is derived from the filename and metadata files
associated to a file. To create an instance of
<a class="reference internal" href="reference/layout.html#almirah.layout.Layout" title="almirah.layout.Layout"><code class="xref py py-class docutils literal notranslate"><span class="pre">Layout</span></code></a>, pass the root directory path of the dataset
and the <a class="reference internal" href="reference/specification.html#almirah.specification.Specification" title="almirah.specification.Specification"><code class="xref py py-class docutils literal notranslate"><span class="pre">Specification</span></code></a> name to
<a class="reference internal" href="reference/layout.html#almirah.layout.Layout" title="almirah.layout.Layout"><code class="xref py py-class docutils literal notranslate"><span class="pre">Layout</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lay</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="s2">&quot;/path to dataset&quot;</span><span class="p">,</span> <span class="n">specification_name</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>almirah automatically retrieves a previous index if the layout is
found. If not, the <a class="reference internal" href="reference/layout.html#almirah.layout.Layout" title="almirah.layout.Layout"><code class="xref py py-class docutils literal notranslate"><span class="pre">Layout</span></code></a> can be indexed using
<a class="reference internal" href="reference/layout.html#almirah.layout.Layout.index" title="almirah.layout.Layout.index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">index()</span></code></a>. Index changes and additions are not
written unless commited using <a class="reference internal" href="reference/indexer.html#almirah.indexer.Indexer.commit" title="almirah.indexer.Indexer.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commit()</span></code></a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">valid_only</span> <span class="pre">=</span> <span class="pre">False</span></code> does not limit the files indexed to
only those that having matching paths in the specification
associated. This can act as a quick way to index the whole
directory or a dirty trick when you do not have time to redefine
the specification to accomodate a new path.</p>
</div>
<p>It is also possible to have a collection of layouts as a
:class`~dataset.Dataset`:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layout_1</span><span class="p">,</span> <span class="n">layout_2</span><span class="p">,</span><span class="o">...</span><span class="p">,</span> <span class="n">layout_n</span><span class="p">)</span>
</pre></div>
</div>
<p>By this, parts of a dataset located in diverse paths can be virtually
collected into one for querying.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Objects can be retrieved once commited from the index, or if
present in the current session by using <cite>get()</cite>. To retrieve the a
<a class="reference internal" href="reference/layout.html#almirah.layout.Layout" title="almirah.layout.Layout"><code class="xref py py-class docutils literal notranslate"><span class="pre">Layout</span></code></a> of specification name <em>bids</em>, you can do
<code class="docutils literal notranslate"><span class="pre">Layout.get(specification_name='bids')</span></code>.</p>
</div>
</section>
<section id="filter-and-query">
<h2>Filter and Query<a class="headerlink" href="#filter-and-query" title="Link to this heading">¶</a></h2>
<p>To retrieve a subset of files that match certain tags, provide the
criterions as keyword arguments to <a class="reference internal" href="reference/layout.html#almirah.layout.Layout.query" title="almirah.layout.Layout.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a> and
<a class="reference internal" href="reference/layout.html#almirah.layout.File" title="almirah.layout.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> objects of passing files will be returned:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lay</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;A3456&quot;</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="s2">&quot;.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you do not know the possible tags, <a class="reference internal" href="reference/layout.html#almirah.layout.Tag.options" title="almirah.layout.Tag.options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">options()</span></code></a>
might be of help. <code class="docutils literal notranslate"><span class="pre">option()</span></code> is available for all objects in and
can be used as a look-up.</p>
</div>
</section>
<section id="converting-file-formats">
<h2>Converting file formats<a class="headerlink" href="#converting-file-formats" title="Link to this heading">¶</a></h2>
<p>Sometimes you want to convert the file format of a file. For example,
from DICOM to NIfTI, or from EDF (Eyelink Data Format) to ASCII. These
are possible by provided the files to be converted, the output format
desired, and the output directory as arguments to
<a class="reference internal" href="reference/convert.html#almirah.utils.convert.convert" title="almirah.utils.convert.convert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">almirah.utils.convert</span> <span class="kn">import</span> <span class="n">convert</span>

<span class="n">files</span> <span class="o">=</span> <span class="n">lay</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">extension</span> <span class="o">=</span> <span class="s2">&quot;.dcm&quot;</span><span class="p">)</span>
<span class="n">convert</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="s2">&quot;NIfTI&quot;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Layout</span> <span class="n">of</span> <span class="n">output</span> <span class="nb">dir</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Currently, the following conversions are supported:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Input extensions</p></th>
<th class="head"><p>Output formats</p></th>
<th class="head"><p>Datatype</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dcm</p></td>
<td><p>NIfTI</p></td>
<td><p>Magnetic resonance imaging</p></td>
</tr>
<tr class="row-odd"><td><p>bdf, cnt, data, edf, gdf, mat, mff, nxe, set, vhdr</p></td>
<td><p>BrainVision, EDF, FIF</p></td>
<td><p>Electroencephalography</p></td>
</tr>
<tr class="row-even"><td><p>edf</p></td>
<td><p>ASCII</p></td>
<td><p>Eye tracking</p></td>
</tr>
<tr class="row-odd"><td><p>nirx</p></td>
<td><p>SNIRF</p></td>
<td><p>Functional near-infrared spectroscopy</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="interfacing-with-a-database">
<h2>Interfacing with a Database<a class="headerlink" href="#interfacing-with-a-database" title="Link to this heading">¶</a></h2>
<p>almirah can connect to databases <a class="reference external" href="https://docs.sqlalchemy.org/en/20/core/engines.html#supported-databases">supported by SQLAlchemy</a>, <a class="reference external" href="https://www.google.com/sheets/about/">Google
sheets</a>, and URL endpoints that support retrieval of database
contents with <a class="reference internal" href="reference/database.html#almirah.database.Database" title="almirah.database.Database"><code class="xref py py-class docutils literal notranslate"><span class="pre">Database</span></code></a>. During object creation,
<code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">host</span></code>, and <code class="docutils literal notranslate"><span class="pre">backend</span></code> have to be provided to
<a class="reference internal" href="reference/database.html#almirah.database.Database" title="almirah.database.Database"><code class="xref py py-class docutils literal notranslate"><span class="pre">Database</span></code></a>. Later, while querying a connection needs
to established using <a class="reference internal" href="reference/database.html#almirah.database.Database.connect" title="almirah.database.Database.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connect()</span></code></a> by providing
the credentials:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">almirah</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;db_name&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;db_host&quot;</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;db_type&quot;</span><span class="p">)</span>

<span class="c1"># Create connection with database</span>
<span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Only reading is supported is databases that are Google sheets or URL
endpoints. Operations such as table creation, writing, metadata
manipulation are only available in SQLAlchemy-valid databases.</p>
<p>To create a table in the database, the table schema is described by
the <a class="reference internal" href="writing-configs/mapping.html"><span class="doc">Database mapping</span></a> config and passed to
<a class="reference internal" href="reference/database.html#almirah.database.Database.create_table" title="almirah.database.Database.create_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_table()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">create_table</span><span class="p">({</span><span class="s2">&quot;mapping&quot;</span><span class="p">:</span><span class="s2">&quot;dict&quot;</span><span class="p">})</span>
</pre></div>
</div>
<p>To insert records into a table in the database, a
<code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> object whose columns match the table columns
is provided as an argument to <a class="reference internal" href="reference/database.html#almirah.database.Database.to_table" title="almirah.database.Database.to_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_table()</span></code></a> along
with the table name:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">to_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;table name&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If no table of the name is present, a table is created
automatically. This might not be desirable if you would like to
define relationships between tables as the created table is vanilla
and lacks these.</p>
</div>
<p><a class="reference internal" href="reference/database.html#almirah.database.Database.get_records" title="almirah.database.Database.get_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_records()</span></code></a> can retrieve records from a
table in the database given the table name. A subset of table columns
can be provided via <code class="docutils literal notranslate"><span class="pre">cols</span></code>, if not all columns are to be retrieved.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">get_records</span><span class="p">(</span><span class="s2">&quot;table_name&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="reporting">
<h2>Reporting<a class="headerlink" href="#reporting" title="Link to this heading">¶</a></h2>
<p>High-level summaries of a dataset can be reported by using
<code class="xref py py-meth docutils literal notranslate"><span class="pre">dataset.Database.report()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">report</span><span class="p">()</span>
</pre></div>
</div>
<p>The tags based on which the summary is to be generated can be provided
via the <code class="docutils literal notranslate"><span class="pre">tags</span></code> argument. <cite>subject</cite> is the used if no values are
provided.</p>
</section>
<section id="errors-and-exceptions">
<h2>Errors and Exceptions<a class="headerlink" href="#errors-and-exceptions" title="Link to this heading">¶</a></h2>
<p>almirah wraps built-in python exceptions with appropriate messages, for
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported transform value </span><span class="si">{</span><span class="n">transform</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>See <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code> for context.</p>
</section>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Link to this heading">¶</a></h2>
<p>If you are using the standard library <code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code> module, almirah will emit
several logs. In some cases, this can be undesireable. You can use the
standard logger interface to change the log level for almirah’s logger:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;almirah&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">The CALM-Brain Resource</p>
<p>If you would like to use almirah to access the CALM-Brain resource,
visit the <a class="reference external" href="https://gin.ncbs.res.in/calm-brain/info/wiki/Home#obtaining-a-subset-of-data-files">CALM-Brain wiki</a>.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="tutorial.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Tutorial</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, girish
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/girishmm/almirah/" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">User Guide</a><ul>
<li><a class="reference internal" href="#installing">Installing</a></li>
<li><a class="reference internal" href="#organizing-the-dataset">Organizing the dataset</a></li>
<li><a class="reference internal" href="#indexing">Indexing</a></li>
<li><a class="reference internal" href="#filter-and-query">Filter and Query</a></li>
<li><a class="reference internal" href="#converting-file-formats">Converting file formats</a></li>
<li><a class="reference internal" href="#interfacing-with-a-database">Interfacing with a Database</a></li>
<li><a class="reference internal" href="#reporting">Reporting</a></li>
<li><a class="reference internal" href="#errors-and-exceptions">Errors and Exceptions</a></li>
<li><a class="reference internal" href="#logging">Logging</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=d9b85e4f"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    </body>
</html>